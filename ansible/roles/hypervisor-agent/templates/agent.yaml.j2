# Hypervisor Agent Configuration
# Generated by Ansible

port: {{ agent_grpc_port }}
role: worker
region: {{ agent_region }}
zone: {{ agent_zone }}
server_addr: "{{ hostvars[groups['servers'][0]]['ansible_host'] }}:{{ server_grpc_port }}"

supported_instance_types:
{% for t in supported_instance_types %}
  - {{ t }}
{% endfor %}

etcd:
  endpoints:
{% for host in groups['etcd'] %}
    - "{{ hostvars[host]['ansible_host'] }}:2379"
{% endfor %}

{% if 'vm' in supported_instance_types %}
libvirt:
  uri: "qemu:///system"
  image_path: /var/lib/hypervisor/images
{% endif %}

{% if 'container' in supported_instance_types %}
containerd:
  address: "/run/containerd/containerd.sock"
  namespace: "hypervisor"
{% endif %}

log_level: {{ log_level }}
